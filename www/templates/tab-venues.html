<ion-view view-title="Venues">
    <ion-content class="has-header" scroll="false">

        <div>
            <div ng-if="mapObj.loading" class="map-loader">
                <ion-spinner></ion-spinner>
            </div>
            <ui-gmap-google-map 
                    center=mapObj.center
                    control=mapCtrl
                    zoom=mapObj.zoom
                    options=mapOptions>
                <ui-gmap-marker ng-repeat="venue in venues"
                    idKey="venue.id"
                    coords="{ latitude: venue.lat, longitude: venue.lng }">
                </ui-gmap-marker>
            </ui-gmap-google-map>
        </div>

        <ion-item class="item-divider">Visited Venues</ion-item>
        <ion-scroll>
            <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="doRefresh()">
            </ion-refresher>
            <ion-list>
                <ion-item ng-if="venuesLoading" style="text-align:center;"><ion-spinner></ion-spinner></ion-item>
                <ion-item ng-repeat="venue in venues" ng-click="showPopup(venue)">
                    <h2>{{ venue.name }}</h2>
                    <span class="badge badge-positive">{{ venue.total_reveals }} / {{ venue.total_visits }}</span>
                    <ion-option-button class="button-assertive" 
                                    ng-click="removeVenue(venue)">
                        I Wasn't There
                    </ion-option-button>
                </ion-item>
                
      
                            
            </ion-list>
        </ion-scroll>
        
        
    </ion-content>
</ion-view>
